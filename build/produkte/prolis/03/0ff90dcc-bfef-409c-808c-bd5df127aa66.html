<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="robots" content="noindex,nofollow">
  <title>APG ZROOE - Lageplan</title>
  <link rel="icon" type="image/x-icon" href="/build/produkte/prolis/01/favicon.ico">
  <script src='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js'></script>
  <link href='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css' rel='stylesheet' />
</head>
<body style="padding: 0; margin: 0;" >
<div id="map" style="width: 100vw; height: 100vh" ></div>
<div id="legend" style="position: absolute; top: 10px;left: 10px; background: hsla(0,0%,100%,.75); padding: 5px; font-family: Arial, sans-serif; font-size: 15px; border-radius: 3px;" ></div>
<script>
  /* global fetch maplibregl */
  var map = new maplibregl.Map({
    container: 'map',
    style: 'basemap-ortho.json',
    maxZoom: 22,
    center: [14.470558972963346, 48.18672776362325], 
    zoom: 12
  });
  map.on('load', () => {
    addBaselayer();
    map.resize(); 
    // map.fitBounds([
    //   [12.644216505360305, 47.24111224820743], 
    //   [13.4424749008368, 47.92536588975807] 
    // ]);
  });
  map.addControl(new maplibregl.NavigationControl());
  map.addControl(new maplibregl.ScaleControl({position: 'bottom-right'}));

  function addBaselayer() {


	map.addSource('bf_nm', {
      type: 'geojson',
      data: 'bf_nm.geojson'
    });    
    map.addLayer({
		"id": "bf_nm",
			"type": "fill",
			"paint": {
				"fill-color": "rgba(255, 133, 133,1)",
				"fill-opacity": 0.3,
				"fill-antialias": true,
				"fill-outline-color": "black"
			},
			"layout": {
				"visibility": "visible"
			},
			"source": "bf_nm",
			"minzoom": 14
    });

	map.addSource('bf_dm', {
      type: 'geojson',
      data: 'bf_dm.geojson'
    });    
    map.addLayer({
		"id": "bf_dm",
			"type": "fill",
			"paint": {
				"fill-color": "rgba(0, 0, 255,1)",
				"fill-opacity": 0.3,
				"fill-antialias": true,
				"fill-outline-color": "black"
			},
			"layout": {
				"visibility": "visible"
			},
			"source": "bf_dm",
			"minzoom": 14
    });


    map.addSource('nm', {
      type: 'geojson',
      data: 'nm.geojson'
    });   
    map.addLayer({
			"id": "nm",
			"type": "circle",
			"paint": {
				"circle-color": "white",
				"circle-radius": {
					"stops": [
						[
							10,
							1.5
						],
						[
							13,
							3
						],
						[
							16,
							6
						]
					]
				},
				"circle-opacity": 0.85,
				"circle-stroke-color": "red",
				"circle-stroke-width": 3
			},
			"layout": {
				"visibility": "visible"
			},
			"source": "nm",
			"minzoom": 8
    });
    
	map.addSource('dm', {
      type: 'geojson',
      data: 'dm.geojson'
    });    
    map.addLayer({
			"id": "dm",
			"type": "circle",
			"paint": {
				"circle-color": "white",
				"circle-radius": {
					"stops": [
						[
							10,
							1.5
						],
						[
							13,
							3
						],
						[
							16,
							6
						]
					]
				},
				"circle-opacity": 0.85,
				"circle-stroke-color": "blue",
				"circle-stroke-width": 3
			},
			"layout": {
				"visibility": "visible"
			},
			"source": "dm",
			"minzoom": 8
    });

 
    map.addSource('zu', {
      type: 'geojson',
      data: 'zu.geojson'
    });
    map.addLayer({
			"id": "zu",
			"type": "line",
			"paint": {
				"line-color": [
					"get",
					"farbe"
				],
				"line-width": 3,
				"line-opacity": 1
			},
			"layout": {
				"visibility": "visible"
			},
			"source": "zu",
			"minzoom": 10
    });

    map.addLayer({
			"id": "nm_label",
			"type": "symbol",
			"paint": {
				"text-color": "black",
				"text-halo-color": "white",
				"text-halo-width": 2
			},
			"layout": {
				"text-font": [
					"Open Sans Regular"
				],
				"text-size": 14,
				"text-field": "{name}",
				"visibility": "visible",
				"text-anchor": "bottom-left",
				"text-offset": [
					0.5,
					-0.5
				],
				"symbol-placement": "point"
			},
			"source": "nm",
			"minzoom": 13
    });
    
	map.addLayer({
			"id": "dm_label",
			"type": "symbol",
			"paint": {
				"text-color": "black",
				"text-halo-color": "white",
				"text-halo-width": 2
			},
			"layout": {
				"text-font": [
					"Open Sans Regular"
				],
				"text-size": 14,
				"text-field": "{name}",
				"visibility": "visible",
				"text-anchor": "bottom-left",
				"text-offset": [
					0.5,
					-0.5
				],
				"symbol-placement": "point"
			},
			"source": "dm",
			"minzoom": 13
    });

  }

</script>

</body>
</html>